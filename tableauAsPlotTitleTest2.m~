%% https://www.mathworks.com/matlabcentral/answers/300523-plot-title-formatting-with-table
clear all;
clc

%% Inputs:
jnames = ["base","elb","wrist"];
lims = [-6.28 -3.14 -6.28 ; 6.28 3.14 6.28];
intitule = "Joint angle limits (rad)";

%% Latex code:
% \begin{tabular}{|c|c|c|}
% \multicolumn{3}{c}{Country List} \\
% \hline
% jn1 & jn1 & jn1 \\
% \hline
% -3 \leq q_1 \leq 3 &
% -3 \leq q_1 \leq 3 &
% -3 \leq q_1 \leq 3 \\
% \hline
% \end{tabular}

%% Parse the number of joints
nbj = size(lims,2);

%% Construct the 1st latex line:
begt = "\begin{tabular}{";
for i=1:nbj
    begt = strcat(begt, "|c");
end
begt = strcat(begt, "|}");

%% Construct the title of the table:
titlet = sprintf("\\multicolumn{%d}{c}{%s} \\\\ ", nbj, intitule);

%% Construct the joint names:
jnamest = jnames(1);
for i=2:nbj
    jnamest = strcat(jnamest," & ");
    jnamest = strcat(jnamest,jnames(i));
end
jnamest = strcat(jnamest," \\ "); %\\ = \ in sprintf(), but not in strcat()

%% Construct the lims:
limst = [];
for i=1:nbj
    currLims = lims(:,i);
    currLims(1)
    currLims(2)
    currLims(1)
    limst(i) = sprintf("%.2f \\leq q_%d \\leq %.2f &",currLims(1),i,currLims(2))
%     limst = strcat(limst,num2str(currLims(1)));
%     limst = strcat(limst," \leq q_");
%     limst = strcat(limst,num2str(i));
%     limst = strcat(limst," \leq ");
%     limst = strcat(limst,num2str(currLims(2)));
%     limst = strcat(limst," & ");
end
limst
limst = limst(1:end-2) %remove the last "&"
limst = strcat(limst," \\ ");

%% Some latex regexs:
trait = "\hline";
endt = "\end{tabular}";

tbl_str = sprintf("%s %s %s %s %s %s %s %s", ...
                  begt, ...
                  titlet, ...
                  trait, ...
                  jnamest, ...
                  trait, ...
                  limst, ...
                  trait, ...
                  endt);

figure
title(tbl_str,'Interpreter','latex')
